rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Helper function to check if user is authenticated
    function isAuthenticated() {
      return request.auth != null;
    }
    
    // Users collection - all authenticated users can read/write
    match /users/{userId} {
      allow read, write: if isAuthenticated();
    }
    
    // Staff members collection - all authenticated users can read/write
    match /staffMembers/{staffId} {
      allow read, write: if isAuthenticated();
    }
    
    // Pending users collection - all authenticated users can read/write
    match /pendingUsers/{pendingUserId} {
      allow read, write: if isAuthenticated();
    }
    
    // Projects collection - all authenticated users can read/write
    match /projects/{projectId} {
      allow read, write: if isAuthenticated();
    }
    
    // Project tasks collection - all authenticated users can read/write
    match /projects/{projectId}/tasks/{taskId} {
      allow read, write: if isAuthenticated();
    }
    
    // Task assignments collection - all authenticated users can read/write
    match /taskAssignments/{assignmentId} {
      allow read, write: if isAuthenticated();
    }
    
    // Pay period config collection - all authenticated users can read/write
    match /payPeriodConfig/{configId} {
      allow read, write: if isAuthenticated();
    }
    
    // Payroll reports collection - all authenticated users can read/write
    match /payrollReports/{reportId} {
      allow read, write: if isAuthenticated();
    }
    
    // Daily reports collection - all authenticated users can read/write
    match /dailyReports/{reportId} {
      allow read, write: if isAuthenticated();
    }
    
    // Feedback collection - all authenticated users can read/write
    match /feedback/{feedbackId} {
      allow read, write: if isAuthenticated();
    }
    
    // Expenses collection - all authenticated users can read/write
    match /expenses/{expenseId} {
      allow read, write: if isAuthenticated();
    }
    
    // Reimbursements collection - all authenticated users can read/write
    match /reimbursements/{reimbursementId} {
      allow read, write: if isAuthenticated();
    }
    
    // Storage rules for file uploads
    match /{allPaths=**} {
      allow read, write: if isAuthenticated();
    }
  }
}